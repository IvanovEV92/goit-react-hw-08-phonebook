(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{35:function(t,e,n){"use strict";n.d(e,"b",(function(){return O})),n.d(e,"d",(function(){return x})),n.d(e,"a",(function(){return h})),n.d(e,"c",(function(){return E}));var r,c,a=n(17),o=n(8),u=n.n(o),s=n(18),i=n(14),l=n.n(i),b=n(2),j=Object(b.b)("contacts/fetchContactsRequest"),d=Object(b.b)("contacts/fetchContactsSuccess"),f=Object(b.b)("contacts/fetchContactsError"),h={handleFormRequest:Object(b.b)("contacts/handleFormRequest"),handleFormSuccess:Object(b.b)("contacts/handleFormSuccess"),handleFormError:Object(b.b)("contacts/handleFormError"),delContactRequest:Object(b.b)("contacts/delContactRequest"),delContactSuccess:Object(b.b)("contacts/delContactSuccess"),delContactError:Object(b.b)("contacts/delContactError"),fetchContactsRequest:j,fetchContactsSuccess:d,fetchContactsError:f,changeFilter:Object(b.b)("contacts/changeFilter")},O={fetchContact:function(){return function(){var t=Object(s.a)(u.a.mark((function t(e){var n,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(h.fetchContactsRequest()),t.prev=1,t.next=4,l.a.get("/contacts");case 4:n=t.sent,r=n.data,e(h.fetchContactsSuccess(r)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),e(h.fetchContactsError(t.t0));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},handleForm:function(t){return function(){var e=Object(s.a)(u.a.mark((function e(n){var r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(h.handleFormRequest()),e.prev=1,e.next=4,l.a.post("/contacts",Object(a.a)({},t));case 4:r=e.sent,c=r.data,n(h.handleFormSuccess(c)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),n(h.handleFormError(e.t0));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},deleteContact:function(t){return function(){var e=Object(s.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n(h.delContactRequest());try{l.a.delete("/contacts/".concat(t)),n(h.delContactSuccess(t))}catch(r){n(h.delContactError(r))}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},p=n(23),g=function(t){return t.contactList.filter},x={getLoading:function(t){return t.contactList.loading},getFilter:g,getVisibleContacts:Object(p.a)([function(t){return t.contactList.items},g],(function(t,e){var n=e.toLowerCase();return t.filter((function(t){return t.name.toLowerCase().includes(n)}))}))},v=n(4),m=n(25),C=n(6),k=Object(b.c)([],(r={},Object(v.a)(r,h.fetchContactsSuccess,(function(t,e){return e.payload})),Object(v.a)(r,h.handleFormSuccess,(function(t,e){var n=e.payload;return[].concat(Object(m.a)(t),[n])})),Object(v.a)(r,h.delContactSuccess,(function(t,e){e._;var n=e.payload;return t.filter((function(t){return t.id!==n}))})),r)),y=Object(b.c)("",Object(v.a)({},h.changeFilter,(function(t,e){return e.payload}))),S=Object(b.c)(!1,(c={},Object(v.a)(c,h.fetchContactsRequest,(function(){return!0})),Object(v.a)(c,h.fetchContactsSuccess,(function(){return!1})),Object(v.a)(c,h.fetchContactsError,(function(){return!1})),Object(v.a)(c,h.addContactRequest,(function(){return!0})),Object(v.a)(c,h.addContactSuccess,(function(){return!1})),Object(v.a)(c,h.addContactError,(function(){return!1})),Object(v.a)(c,h.delContactRequest,(function(){return!0})),Object(v.a)(c,h.delContactSuccess,(function(){return!1})),Object(v.a)(c,h.delContactError,(function(){return!1})),c)),E=Object(C.c)({items:k,filter:y,loading:S})},54:function(t,e,n){},86:function(t,e,n){"use strict";n.r(e);var r=n(0),c=n.n(r),a=n(22),o=n.n(a),u=(n(54),n(32)),s=n(33),i=n(36),l=n(34),b=n(5),j=n(10),d=n(9),f=n(16),h=n(1),O={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,color:"#2A363B"},activeLink:{color:"#E84A5F"}},p=Object(j.b)((function(t){return{isAuthenticated:d.c.getIsAuthenticated(t)}}))((function(t){var e=t.isAuthenticated;return Object(h.jsxs)("nav",{children:[Object(h.jsx)(f.b,{to:"/",exact:!0,style:O.link,activeStyle:O.activeLink,children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),e&&Object(h.jsx)(f.b,{to:"/contacts",exact:!0,style:O.link,activeStyle:O.activeLink,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b"})]})})),g={container:{display:"flex",alignItems:"center"},avatar:{marginRight:4},name:{fontWeight:700,marginRight:12}},x={onLogout:d.a.logOut},v=Object(j.b)((function(t){return{name:d.c.getUsername(t)}}),x)((function(t){var e=t.avatar,n=t.name,r=t.onLogout;return Object(h.jsxs)("div",{style:g.container,children:[Object(h.jsx)("img",{src:e,alt:"",width:"32",style:g.avatar}),Object(h.jsxs)("span",{style:g.name,children:["Welcome, ",n]}),Object(h.jsx)("button",{type:"button",onClick:r,children:"Logout"})]})})),m={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,color:"#2A363B"},activeLink:{color:"#E84A5F"}},C=function(){return Object(h.jsxs)("div",{children:[Object(h.jsx)(f.b,{to:"/register",exact:!0,style:m.link,activeStyle:m.activeLink,children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(h.jsx)(f.b,{to:"/login",exact:!0,style:m.link,activeStyle:m.activeLink,children:"\u041b\u043e\u0433\u0438\u043d"})]})},k={header:{display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid #2A363B"}},y=Object(j.b)((function(t){return{isAuthenticated:d.c.getIsAuthenticated(t)}}))((function(t){var e=t.isAuthenticated;return Object(h.jsxs)("header",{style:k.header,children:[Object(h.jsx)(p,{}),e?Object(h.jsx)(v,{}):Object(h.jsx)(C,{})]})})),S=n(17),E=n(24),R=Object(j.b)((function(t){return{isAuthenticated:d.c.getIsAuthenticated(t)}}))((function(t){var e=t.component,n=t.isAuthenticated,r=t.redirectTo,c=Object(E.a)(t,["component","isAuthenticated","redirectTo"]);return Object(h.jsx)(b.b,Object(S.a)(Object(S.a)({},c),{},{render:function(t){return n?Object(h.jsx)(e,Object(S.a)({},t)):Object(h.jsx)(b.a,{to:r})}}))})),q=Object(j.b)((function(t){return{isAuthenticated:d.c.getIsAuthenticated(t)}}))((function(t){var e=t.component,n=t.isAuthenticated,r=t.redirectTo,c=Object(E.a)(t,["component","isAuthenticated","redirectTo"]);return Object(h.jsx)(b.b,Object(S.a)(Object(S.a)({},c),{},{render:function(t){return n&&c.restricted?Object(h.jsx)(b.a,{to:r}):Object(h.jsx)(e,Object(S.a)({},t))}}))})),w=Object(r.lazy)((function(){return n.e(4).then(n.bind(null,90))})),A=Object(r.lazy)((function(){return n.e(6).then(n.bind(null,91))})),F=Object(r.lazy)((function(){return n.e(5).then(n.bind(null,92))})),U=Object(r.lazy)((function(){return n.e(3).then(n.bind(null,93))})),L=function(t){Object(i.a)(n,t);var e=Object(l.a)(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.props.onGetCurretnUser()}},{key:"render",value:function(){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(y,{}),Object(h.jsx)(r.Suspense,{fallback:Object(h.jsx)("p",{children:"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c..."}),children:Object(h.jsxs)(b.d,{children:[Object(h.jsx)(q,{exact:!0,path:"/",component:w}),Object(h.jsx)(q,{path:"/register",restricted:!0,redirectTo:"/contacts",component:A}),Object(h.jsx)(q,{path:"/login",restricted:!0,redirectTo:"/contacts",component:F}),Object(h.jsx)(R,{path:"/contacts",redirectTo:"/login",component:U})]})})]})}}]),n}(r.Component),I={onGetCurretnUser:d.a.getCurrentUser},T=Object(j.b)(null,I)(L),z=n(25),B=n(2),W=n(35),D=n(19),G=n(47),J=n.n(G),M=n(48),V=n.n(M),_=[].concat(Object(z.a)(Object(B.d)({serializableCheck:{ignoredActions:[D.a,D.f,D.b,D.c,D.d,D.e]}})),[V.a]),H={key:"auth",storage:J.a,whitelist:["token"]},K=Object(B.a)({reducer:{auth:Object(D.g)(H,d.b),contactList:W.c},middleware:_,devTools:!1}),N={store:K,persistor:Object(D.h)(K)},P=n(49);o.a.render(Object(h.jsx)(c.a.StrictMode,{children:Object(h.jsx)(j.a,{store:N.store,children:Object(h.jsx)(P.a,{loading:null,persistor:N.persistor,children:Object(h.jsx)(f.a,{children:Object(h.jsx)(T,{})})})})}),document.getElementById("root"))},9:function(t,e,n){"use strict";n.d(e,"b",(function(){return m})),n.d(e,"a",(function(){return w})),n.d(e,"c",(function(){return A}));var r,c,a,o=n(2),u=Object(o.b)("auth/registerRequest"),s=Object(o.b)("auth/registerSuccess"),i=Object(o.b)("auth/registerError"),l=Object(o.b)("auth/loginRequest"),b=Object(o.b)("auth/loginSuccess"),j=Object(o.b)("auth/loginError"),d={registerRequest:u,registerSuccess:s,registerError:i,logoutRequest:Object(o.b)("auth/logoutRequest"),logoutSuccess:Object(o.b)("auth/logoutSuccess"),logoutError:Object(o.b)("auth/logoutError"),loginRequest:l,loginSuccess:b,loginError:j,getCurrentUserRequest:Object(o.b)("auth/getCurrentUserRequest"),getCurrentUserSuccess:Object(o.b)("auth/getCurrentUserSuccess"),getCurrentUserError:Object(o.b)("auth/getCurrentUserError")},f=n(4),h=n(6),O={name:null,email:null},p=Object(o.c)(O,(r={},Object(f.a)(r,d.registerSuccess,(function(t,e){return e.payload.user})),Object(f.a)(r,d.loginSuccess,(function(t,e){return e.payload.user})),Object(f.a)(r,d.logoutSuccess,(function(){return O})),Object(f.a)(r,d.getCurrentUserSuccess,(function(t,e){return e.payload})),r)),g=Object(o.c)(null,(c={},Object(f.a)(c,d.registerSuccess,(function(t,e){return e.payload.token})),Object(f.a)(c,d.loginSuccess,(function(t,e){return e.payload.token})),Object(f.a)(c,d.logoutSuccess,(function(){return null})),c)),x=function(t,e){return e.payload},v=Object(o.c)(null,(a={},Object(f.a)(a,d.registerError,x),Object(f.a)(a,d.loginError,x),Object(f.a)(a,d.logoutError,x),Object(f.a)(a,d.getCurrentUserError,x),a)),m=Object(h.c)({user:p,token:g,error:v}),C=n(8),k=n.n(C),y=n(18),S=n(14),E=n.n(S);E.a.defaults.baseURL="https://connections-api.herokuapp.com";var R=function(t){E.a.defaults.headers.common.Authorization="Bearer ".concat(t)},q=function(){E.a.defaults.headers.common.Authorization=""},w={register:function(t){return function(){var e=Object(y.a)(k.a.mark((function e(n){var r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(d.registerRequest()),e.prev=1,e.next=4,E.a.post("/users/signup",t);case 4:r=e.sent,R(r.data.token),n(d.registerSuccess(r.data)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),n(d.registerError(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},logOut:function(){return function(){var t=Object(y.a)(k.a.mark((function t(e){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(d.logoutRequest()),t.prev=1,t.next=4,E.a.post("/users/logout");case 4:q(),e(d.logoutSuccess()),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e(d.logoutError(t.t0.message));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},logIn:function(t){return function(){var e=Object(y.a)(k.a.mark((function e(n){var r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(d.loginRequest()),e.prev=1,e.next=4,E.a.post("/users/login",t);case 4:r=e.sent,R(r.data.token),n(d.loginSuccess(r.data)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),n(d.loginError(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},getCurrentUser:function(){return function(){var t=Object(y.a)(k.a.mark((function t(e,n){var r,c,a;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n(),c=r.auth.token){t.next=3;break}return t.abrupt("return");case 3:return R(c),e(d.getCurrentUserRequest()),t.prev=5,t.next=8,E.a.get("/users/current");case 8:a=t.sent,e(d.getCurrentUserSuccess(a.data)),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(5),e(d.getCurrentUserError(t.t0.message));case 15:case"end":return t.stop()}}),t,null,[[5,12]])})));return function(e,n){return t.apply(this,arguments)}}()}},A={getIsAuthenticated:function(t){return Boolean(t.auth.token)},getUsername:function(t){return t.auth.user.name}}}},[[86,1,2]]]);
//# sourceMappingURL=main.1da60e66.chunk.js.map